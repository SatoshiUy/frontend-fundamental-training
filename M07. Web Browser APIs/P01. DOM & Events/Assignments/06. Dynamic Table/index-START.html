<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style>
    table {
      border: 2px solid #3b9393;
    }

    thead th {
      background-color: #54d2d2;
      color: #fff;
      cursor: pointer;
    }

    thead {
      display: block;
    }

    tbody {
      display: block;
      max-height: 500px;
      overflow-y: scroll;

    }

    td,
    th {
      width: 40px;
      height: 40px;
      background-color: #d9ffff;
      text-align: center;
      border: 1px solid #ddd;
      color: #735e3b;
      font-family: Roboto;
    }
  </style>
</head>

<body>
  <form action="#">
    <label for="row">
      Row
      <input type="text" name="row" class="row" id="row" value="1000">
    </label>
    <label for="col">
      Column
      <input type="text" name="col" class="col" id="col" value="16">
    </label>
    <button type="submit" class="create">Create</button>
  </form>
  <br>
  <table class="table">
    <thead></thead>
    <tbody></tbody>
  </table>
</body>
<script>
  const table = document.querySelector('.table');
  const form = document.querySelector('form');
  const thead = document.querySelector('thead');
  const tbody = document.querySelector('tbody');

  let data = [];
  let sortedData = [];
  let isSorted = false;
  let sortCol = null;
  let lastRenderedRow = 0;
  let row = 0;
  let col = 0;

  generateData();
  renderHeader();
  renderData(data, lastRenderedRow, 100);

  form.addEventListener('submit', e => {
    e.preventDefault();
    generateData();

    tbody.textContent = '';
    tbody.scrollTop = 0;
    lastRenderedRow = 0;
    renderHeader();
    renderData(data, lastRenderedRow, 100);
  });
  tbody.addEventListener('scroll', renderNewRows);

  function generateData() {
    // Select row and column input

    // Generate random data

  }

  function renderHeader() {
    // Render header of table
    // Header template <th class="sort-col" data-col="${i}">${i}</th>

    // Add event listener to each th

  }

  function renderData(data, minRow, maxRow) {
    // Loop through random data and generate tr (row) and td (column)
    for (let r = minRow; r < row && r < maxRow; r++) {
      // Create tr


      for (let c = 0; c < col; c++) {
        // Create td

        // Assign textContent to td
        // Hint: get data from data[r][c]

        // Append td to tr

      }
      // Append tr to thead
    }

    // Keep track of last rendered row for lazy loading purpose
    lastRenderedRow = maxRow;
  }

  function renderNewRows(e) {
    // Check if user has scroll to the bottom of the tbody or not
    if (tbody.scrollTop + tbody.clientHeight === tbody.scrollHeight) {
      if (isSorted) {
        // Render next 100 rows with sorted data

      }
      else {
        // Render next 100 rows
      }
    }
  }

  function sortDataByCol(e) {
    // Get column number by data-col attribute

    // Set flag isSorted true

    // Set sortCol = colNumber

    // Sort the data and assign thee result to sortedData variable

    // Remove tbody textContent

    // Scroll to top of tbody

    // Set lastRenderedRow to 0

    // Re-render tbody with sortedData

  }

  function randNum(min, max) {
    return Math.floor(Math.random() * (max - min) + min);
  }
</script>

</html>